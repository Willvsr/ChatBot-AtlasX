{"flow":{"onboarding":{"$contentActions":[{"input":{"bypass":false,"$cardContent":{"document":{"id":"a5f855b2-7344-44ad-bf8b-75bccd63d288","type":"text/plain","content":"Entrada do usu√°rio"},"editable":false,"deletable":false,"position":"right"},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"5c39255c-3916-4924-9c71-84e774ccb654","typeOfStateId":"state","$connId":"con_3","$id":"0787d17e-55da-4436-aa10-d0a48e299a22","conditions":[{"source":"input","comparison":"exists","values":[],"variable":"destinyBlock"}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[{"$id":"72c1fe68-3283-4100-871f-8a4b4470e3b9","$typeOfContent":"","$description":"","$inputSchema":{"type":"object","properties":{},"required":[]},"type":"ExecuteScriptV2","$title":"Run script \"platform\"","$invalid":false,"settings":{"function":"run","source":"function run(contactIdentity) {\n  const contactDomain = contactIdentity.split('@')[1];\n\n  switch (contactDomain) {\n    case 'wa.gw.msging.net':\n    case 'tunnel.msging.net':\n      return 'Whatsapp';\n\n    case 'telegram.gw.msging.net':\n      return 'Telegram';\n\n    case \"messenger.gw.msging.net\":\n      return \"Messenger\";\n\n    case 'instagram.gw.msging.net':\n      return 'Instagram';\n\n    case '0mn.io':\n      return 'Blipchat';\n\n    case 'mailgun.gw.msging.net':\n      return 'Email';\n\n    case 'businessmessages.gw.msging.net':\n      return 'Gbm';\n\n    default:\n      return 'Other';\n  };\n}","inputVariables":["contact.identity"],"outputVariable":"platform"},"conditions":[]},{"$id":"0fbd01e2-a8d7-4e03-b8a5-dd5857febb17","$typeOfContent":"","type":"ExecuteScript","$title":"Run script \"boldTags\"","$invalid":false,"settings":{"function":"run","source":"function run(userChannel) {\n    return getBoldTagsByChannel(userChannel)\n}\n\nfunction getBoldTagsByChannel(userChannel) {\n    const DEFAULT_CHANNEL = \"Other\";\n    const WHATSAPP_CHANNEL = \"Whatsapp\";\n    const BLIPCHAT_CHANNEL = \"Blipchat\";\n    const FACEBOOK_CHANNEL = \"Facebook\";\n    const INSTAGRAM_CHANNEL = \"Instagram\"\n    const GOOGLE_CHANNEL = \"Gbm\"\n\n    let channelBoldTags = {\n        open: \"<b>\",\n        close: \"</b>\"\n    };\n\n    switch (userChannel) {\n        case WHATSAPP_CHANNEL:\n            channelBoldTags = {\n                open: \"*\",\n                close: \"*\"\n            };\n            break;\n        case FACEBOOK_CHANNEL:\n            channelBoldTags = {\n                open: \"\",\n                close: \"\"\n            };\n            break;\n        case GOOGLE_CHANNEL:\n            channelBoldTags = {\n                open: \"<b>\",\n                close: \"</b>\"\n            };\n            break;\n        case INSTAGRAM_CHANNEL:\n            channelBoldTags = {\n                open: \"\",\n                close: \"\"\n            };\n            break;\n    }\n\n    return channelBoldTags;\n}","inputVariables":["platform"],"outputVariable":"boldTags","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"3a236f88-bdf8-471b-84ff-91618a025099","$typeOfContent":"","type":"ExecuteScript","$title":"Run script \"italicTags\"","$invalid":false,"settings":{"function":"run","source":"function run(userChannel) {\n    return getItalicTagsByChannel(userChannel)\n}\n\nfunction getItalicTagsByChannel(userChannel) {\n    const DEFAULT_CHANNEL = \"Other\";\n    const WHATSAPP_CHANNEL = \"Whatsapp\";\n    const BLIPCHAT_CHANNEL = \"Blipchat\";\n    const FACEBOOK_CHANNEL = \"Facebook\"\n    const GOOGLE_CHANNEL = \"Gbm\"\n\n    let channelItalicTags = {\n        open: \"<i>\",\n        close: \"</i>\"\n    };\n\n    switch (userChannel) {\n        case WHATSAPP_CHANNEL:\n        case FACEBOOK_CHANNEL:\n            channelItalicTags = {\n                open: \"_\",\n                close: \"_\"\n            };\n            break;\n        case GOOGLE_CHANNEL:\n            channelItalicTags = {\n                open: \"<i>\",\n                close: \"</i>\"\n            };\n            break;\n    }\n\n    return channelItalicTags;\n}","inputVariables":["platform"],"outputVariable":"italicTags","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"92b6c275-1194-4f79-b026-d56754803aad","$typeOfContent":"","type":"ExecuteScript","$title":"Run script \"flow\"","$invalid":false,"settings":{"function":"run","source":"function run(input) {\n    try {\n        const { flow } = JSON.parse(input); \n        \n        return flow;\n    } catch (ex) {\n        return \"vazio\"\n    }\n}","inputVariables":["input.content"],"outputVariable":"flow","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"ad63f220-dfcd-4c51-acb9-f12d9996b697","$typeOfContent":"","type":"ExecuteScript","$title":"Run script \"destinyBlock\"","$invalid":false,"settings":{"function":"run","source":"function run(input) {\n    try {\n        const { destinyBlock } = JSON.parse(input);\n\n        if (!destinyBlock) return \"default\";\n\n        return destinyBlock;\n    } catch (ex) {\n        return \"default\";\n    };\n};","inputVariables":["input.content"],"outputVariable":"destinyBlock","LocalTimeZoneEnabled":false},"conditions":[],"continueOnError":false},{"$id":"40eb4d3a-8c96-4cf0-a138-436ec0b63af4","$typeOfContent":"","type":"ExecuteScript","$title":"Run script \"userPhoneNumber\"","$invalid":false,"settings":{"function":"run","source":"function run(identity) {\n    try {\n        //let phone = JSON.parse(identity)\n        let phoneNumber = identity.split(\"@\")[0]\n        return phoneNumber;\n    } catch (ex) {\n        return \"notWhatsApp\"\n    }\n}","inputVariables":["contact.identity"],"outputVariable":"userPhoneNumber","LocalTimeZoneEnabled":false},"conditions":[{"source":"context","variable":"platform","comparison":"equals","values":["Whatsapp"]}]},{"$id":"1d73fb3e-7477-4567-ab03-f10ca00207e8","$typeOfContent":"","type":"MergeContact","$title":"Set contact variable \"Telefone\"","$invalid":false,"settings":{"extras":{},"phoneNumber":"{{userPhoneNumber}}"},"conditions":[{"source":"context","comparison":"equals","values":["Whatsapp"],"variable":"platform"}]},{"$id":"6c93e82b-07bf-4588-b280-9d21e84b841a","$typeOfContent":"","type":"ExecuteScript","$title":"Run script \"bodyRequest\"","$invalid":false,"settings":{"function":"run","source":"function run(userPhoneNumber) {\n\tconst bodyRequest = {\n\t\t\"id\": \"{{random.guid}}\",\n\t\t\"to\": \"postmaster@wa.gw.msging.net\",\n\t\t\"method\": \"get\",\n\t\t\"uri\": `lime://wa.gw.msging.net/accounts/${userPhoneNumber}`\n\t};\n\n\treturn JSON.stringify(bodyRequest);\n}","inputVariables":["userPhoneNumber"],"outputVariable":"bodyRequest","LocalTimeZoneEnabled":false},"conditions":[{"source":"context","variable":"platform","comparison":"equals","values":["Whatsapp"]}]},{"$id":"92ad60ec-8293-4578-9d4d-d377e60a430c","$typeOfContent":"","type":"ProcessHttp","$title":"[POST] Get User Name By WhatsApp","$invalid":false,"settings":{"headers":{"Authorization":"{{resource.BotConfiguration@routerAccessKey.Http}}","Content-Type":"application/json"},"method":"POST","body":"{{bodyRequest}}","uri":"{{resource.BotConfiguration@contractUrl}}/commands","responseStatusVariable":"statusRequestGetUserNameByWhatsApp","responseBodyVariable":"responseRequestGetUserNameByWhatsApp"},"conditions":[{"source":"context","comparison":"equals","variable":"platform","values":["WhatsApp"]}]},{"$id":"01dd814c-ecf4-45c9-a337-09977c35c64a","$typeOfContent":"","$description":"","$inputSchema":{"type":"object","properties":{},"required":[]},"type":"ExecuteScriptV2","$title":"Run script \"userName\"","$invalid":false,"settings":{"function":"run","source":"function run(responseRequestGetUserNameByWhatsApp) {\n\ttry {\n\t\tconst { resource } = JSON.parse(responseRequestGetUserNameByWhatsApp)\n\n\t\treturn resource.fullName\n\t} catch (_) {\n\t\treturn ''\n\t}\n}","inputVariables":["responseRequestGetUserNameByWhatsApp"],"outputVariable":"userName"},"conditions":[{"source":"context","variable":"statusRequestGetUserNameByWhatsApp","comparison":"equals","values":["200"]}]},{"$id":"03c389b8-80a7-4aed-b53f-836f37602d61","$typeOfContent":"","type":"MergeContact","$title":"Set contact variable \"Nome\"","$invalid":false,"settings":{"extras":{},"name":"{{userName}}"},"conditions":[{"values":["200"],"source":"context","variable":"statusRequestGetUserNameByWhatsApp","comparison":"equals"}]},{"$id":"5f8c95af-aa45-4d3f-9170-d00e9639e717","$typeOfContent":"","type":"SetVariable","$title":"Set \"false\" to variable \"persistentReturn\"","$invalid":false,"settings":{"variable":"persistentReturn","value":"false"},"conditions":[{"source":"context","comparison":"notExists","values":[],"variable":"persistentReturn"}]},{"$id":"ca35ac3c-7240-4b07-a2ee-0c3cb3b4d292","$typeOfContent":"","type":"SetVariable","$title":"Set \"false\" to variable \"inatividade\"","$invalid":false,"settings":{"variable":"inatividade","value":"false"},"conditions":[]},{"$id":"fb1adf77-abbb-4583-9d16-52c271c6af61","$typeOfContent":"","$description":"","$inputSchema":{"type":"object","properties":{},"required":[]},"type":"ExecuteScriptV2","$title":"Run script \"metadata\"","$invalid":false,"settings":{"function":"run","source":"function run(inputMessage) {\n\tconst { metadata } = JSON.parse(inputMessage)\n\n\tif (metadata && metadata['#wa.referral.headline']) {\n\t\treturn JSON.stringify({\n\t\t\theadline: metadata['#wa.referral.headline'],\n\t\t\tbody: metadata['#wa.referral.body'],\n\t\t\tsource_type: metadata['#wa.referral.source_type'],\n\t\t\tsource_id: metadata['#wa.referral.source_id'],\n\t\t\tsource_url: metadata['#wa.referral.source_url'],\n\t\t\tmedia_id: metadata['#wa.referral.image.id']\n\t\t})\n\t}\n\n\treturn JSON.stringify(metadata)\n}","inputVariables":["input.message"],"outputVariable":"metadata"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"5c39255c-3916-4924-9c71-84e774ccb654","$invalid":false,"typeOfStateId":"state"},"id":"onboarding","root":true,"$position":{"top":"219px","left":"1510px"},"$title":"In√≠cio","$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"$tags":[{"id":"blip-tag-3326bed7-2aa0-4bca-b820-b5f7cc0e7e9d","label":"ExecuteScriptV2","background":"#FFB74D","canChangeBackground":false},{"id":"blip-tag-74dc43bd-d267-4277-a0aa-f9ac9b3a90f9","label":"ExecuteScript","background":"#FF961E","canChangeBackground":false},{"id":"blip-tag-2ad39746-4394-412a-ab35-62593c7888ef","label":"MergeContact","background":"#FF1E90","canChangeBackground":false},{"id":"blip-tag-568fb79b-8bf6-4627-9506-a381ce418cbb","label":"ProcessHttp","background":"#7762E3","canChangeBackground":false},{"id":"blip-tag-563d3f12-97cf-4a10-931f-6c0ea07b7618","label":"SetVariable","background":"#FF4A1E","canChangeBackground":false},{"id":"blip-tag-b66527fc-6ed9-41b6-ad69-6d54d5bea645","label":"UserInput","background":"#000000","canChangeBackground":false}]},"fallback":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"95b10ba8-e351-4d16-9b10-ce14961cb1fd","type":"text/plain","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right"},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"ff11452d-5194-48c3-8745-969f248fbd53","typeOfStateId":"state","$connId":"con_8","$id":"d12c38ac-e523-4382-a3ac-eb9376d78ec9","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"41300612-e787-4688-bc4c-91335397a7b7","$typeOfContent":"","type":"SetVariable","$title":"Set \"lastBlock\" to blip variable \"state.previous.name\"","$invalid":false,"settings":{"variable":"lastBlock","value":"{{state.previous.name}}"},"conditions":[]},{"$id":"c82238fd-7041-4e38-8300-7ae3646d3f89","$typeOfContent":"","$description":"","$inputSchema":{"type":"object","properties":{},"required":[]},"type":"ExecuteScriptV2","$title":"Run script \"userInput\"","$invalid":false,"settings":{"function":"run","source":"function run(input, inputType) {\n    const userInput = {\n        'input': input || 'vazio',\n        'type': input ? inputType : 'vazio'\n    }\n\n    return JSON.stringify(userInput)\n}","inputVariables":["input.content","input.type"],"outputVariable":"userInput"},"conditions":[]},{"$id":"4b24f533-4cd6-422f-bc6c-43bb9d9b898e","$typeOfContent":"","$description":"","$inputSchema":{"type":"object","properties":{},"required":[]},"type":"ExecuteScriptV2","$title":"Run script \"flow\"","$invalid":false,"settings":{"function":"run","source":"function run(identifierFlow, lastBlock) {\n    const flow = {\n        \"origin\": identifierFlow,\n        \"blockOrigin\": lastBlock\n    }\n\n    return JSON.stringify(flow)\n}","inputVariables":["application.identifier","lastBlock"],"outputVariable":"flow"},"conditions":[]},{"$id":"9d8558f5-e642-4e58-abc6-410d42cbc7c4","$typeOfContent":"","type":"SetVariable","$title":"Set \"true\" to variable \"inatividade\"","$invalid":false,"settings":{"variable":"inatividade","value":"true"},"conditions":[{"source":"input","comparison":"notExists","values":[]}]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"ff11452d-5194-48c3-8745-969f248fbd53","$invalid":false,"typeOfStateId":"state"},"id":"fallback","$position":{"top":"74px","left":"2079px"},"$title":"Exce√ß√µes","$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"$tags":[{"id":"blip-tag-6511ce68-e612-4655-afcf-e8a572759f12","label":"SetVariable","background":"#FF4A1E","canChangeBackground":false},{"id":"blip-tag-ea34177b-8521-4511-ba30-c385c54c9029","label":"ExecuteScriptV2","background":"#FFB74D","canChangeBackground":false}]},"ff11452d-5194-48c3-8745-969f248fbd53":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"3ddc7104-69d0-43de-b3fd-0a30f0a6458c","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"1ae5fcb1-d1de-41cd-a2d9-f7e2a54bf2ad","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#0A6045","label":"Go to","id":"blip-tag-2b06d5cc-ddd3-00f4-3d13-04799dbf4d06","canChangeBackground":false}],"id":"ff11452d-5194-48c3-8745-969f248fbd53","root":false,"$title":"[Go to] Cascata de Valiacao","$position":{"top":"210px","left":"2080px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"5c39255c-3916-4924-9c71-84e774ccb654":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"17d2d1b2-6dc7-4757-8d11-670235777543","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"0aa2a38b-67a1-478a-93ba-96dc3cc74c00","typeOfStateId":"state","$connId":"con_13","$id":"8a0239d9-8d3a-4735-9eb7-f4b23a16c51d","conditions":[{"source":"context","comparison":"notEquals","values":["default"],"variable":"destinyBlock"}],"$invalid":false},{"stateId":"95567520-a07c-4922-80b2-3641b5d9c08b","typeOfStateId":"state","$connId":"con_18","$id":"a5eaab1b-117f-4134-8819-f3143198e8aa","conditions":[{"source":"context","comparison":"equals","variable":"contact.extras.isReturn","values":["true"]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"1f418893-f6d3-4ca1-ac3e-ac6ddbf4d57b","$typeOfContent":"","type":"SetVariable","$title":"Set variable \"bo\"","$invalid":false,"settings":{"variable":"bo","value":"{{boldTags@open}}"},"conditions":[]},{"$id":"c6578a05-631e-45df-b430-67fdbc02b688","$typeOfContent":"","type":"SetVariable","$title":"Set variable \"bc\"","$invalid":false,"settings":{"variable":"bc","value":"{{boldTags@close}}"},"conditions":[]},{"$id":"3c60e95b-d9c1-4dbf-9a76-fbc722d2ae06","$typeOfContent":"","type":"SetVariable","$title":"Set variable \"io\"","$invalid":false,"settings":{"variable":"io","value":"{{italicTags@open}}"},"conditions":[]},{"$id":"6a9ef52e-d1b4-405b-a950-7d6edfb15a03","$typeOfContent":"","type":"SetVariable","$title":"Set variable \"ic\"","$invalid":false,"settings":{"variable":"ic","value":"{{italicTags@close}}"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"614ca8aa-1a53-435d-aa5c-95106caf4b35","$invalid":false,"typeOfStateId":"state"},"$tags":[{"id":"blip-tag-1fab0227-149e-4744-9fa6-b2a4af8bf49f","label":"SetVariable","background":"#FF4A1E","canChangeBackground":false}],"id":"5c39255c-3916-4924-9c71-84e774ccb654","root":false,"$title":"[Logic only] Check redirect","$position":{"top":"85px","left":"1511px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"0aa2a38b-67a1-478a-93ba-96dc3cc74c00":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"a8261fe0-c103-40b3-9392-27d6fc6dff28","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"{{redirectToBlock}}","typeOfStateId":"variable","$id":"7a7ce857-3bcc-4a8e-bf14-2a31d6a9df11","conditions":[{"source":"input","comparison":"exists","values":[],"variable":"redirectToBlock"}],"$invalid":false}],"$enteringCustomActions":[{"$id":"9f4d290a-d206-4bf1-bf36-db9c4451eb54","$typeOfContent":"","$description":"","$inputSchema":{"type":"object","properties":{},"required":[]},"type":"ExecuteScriptV2","$title":"Run script \"redirectToBlock\"","$invalid":false,"settings":{"function":"run","source":"function run(returnBlock, persistentReturn, errorType) {\n    const block = JSON.parse(returnBlock)\n\n    if (errorType === 'api') return block.blocoAnterior \n\n    if (persistentReturn === \"true\" && (!errorType.includes(\"dinamico\")))  return block.blocoAnterior\n\n    return block.default\n}","inputVariables":["returnBlock","persistentReturn","errorType"],"outputVariable":"redirectToBlock"},"conditions":[]},{"$id":"379854bc-7941-4cbe-a4c5-5ff3550ac5b4","$typeOfContent":"","type":"SetVariable","$title":"Set \"false\" to variable \"persistentReturn\"","$invalid":false,"settings":{"variable":"persistentReturn","value":"false"},"conditions":[{"values":[],"source":"context","variable":"persistentReturn","comparison":"exists"},{"values":["true"],"source":"context","variable":"persistentReturn","comparison":"equals"}]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"background":"#0A6045","label":"Go to","id":"blip-tag-2b06d5cc-ddd3-00f4-3d13-04799dbf4d06","canChangeBackground":false},{"id":"blip-tag-6c6fc352-3950-43e2-bdad-c347c58de36e","label":"ExecuteScriptV2","background":"#FFB74D","canChangeBackground":false},{"id":"blip-tag-41a10d89-15f8-475d-847e-659384da15da","label":"SetVariable","background":"#FF4A1E","canChangeBackground":false}],"id":"0aa2a38b-67a1-478a-93ba-96dc3cc74c00","root":false,"$title":"[Go to] Mapped block","$position":{"top":"87px","left":"1704px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#fff9c4","textColor":"#000000"}},"95567520-a07c-4922-80b2-3641b5d9c08b":{"$contentActions":[{"action":{"$id":"422453ce-dcd9-45c2-8f19-47d29a4718dd","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"f091ec53-8919-4990-9339-fdc17a129c0b","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"f091ec53-8919-4990-9339-fdc17a129c0b","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"0c0b5906-8887-4c44-90bc-30f756ac385d","$typeOfContent":"text","type":"SendMessage","settings":{"id":"730b76c7-4276-4444-abed-d7525ab6a861","type":"text/plain","content":"Ol√°! √â um prazer falar com voc√™ novamente! üòÑ","metadata":{}},"$cardContent":{"document":{"id":"730b76c7-4276-4444-abed-d7525ab6a861","type":"text/plain","content":"Ol√°! √â um prazer falar com voc√™ novamente! üòÑ"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"6e7092c3-42fe-4b76-8abb-e7d44da69326","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"870c00cf-ab58-4567-9a81-366cc61b49c3","typeOfStateId":"state","$connId":"con_23","$id":"dbf4570b-faa4-4867-bf3b-d5df4c0d929c","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"0af75393-ba4b-49b6-ac0f-c8334c450348","$typeOfContent":"","type":"TrackEvent","$title":"retorno exibicao","$invalid":false,"settings":{"extras":{"Headline An√∫ncio":"{{metadata@headline}}","Id do An√∫ncio":"{{metadata@source_id}}","Url do An√∫ncio":"{{metadata@source_url}}"},"category":"retorno exibicao","action":"Exibicao"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"870c00cf-ab58-4567-9a81-366cc61b49c3","$invalid":false,"typeOfStateId":"state"},"$tags":[{"id":"blip-tag-535c947f-4747-4a71-a259-39333589dee1","label":"TrackEvent","background":"#61D36F","canChangeBackground":false},{"id":"blip-tag-17bd6fe7-a98c-4ca2-99f5-a9efafaf2710","label":"SendMessage","background":"#EE82EE","canChangeBackground":false}],"id":"95567520-a07c-4922-80b2-3641b5d9c08b","root":false,"$title":"[BV.1.0.0] [Msg]","$position":{"top":"97px","left":"1317px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"isAiGenerated":false},"1ae5fcb1-d1de-41cd-a2d9-f7e2a54bf2ad":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"3ddc7104-69d0-43de-b3fd-0a30f0a6458c","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[{"$id":"4d654f96-3d29-4651-b8b9-55ebbc3ccf8b","$typeOfContent":"","$description":"","$inputSchema":{"type":"object","properties":{},"required":[]},"type":"ExecuteScriptV2","$title":"Run script \"redirectMessage\"","$invalid":false,"settings":{"function":"run","source":"function run(userInput, flow) {\n    try {\n        userInput = JSON.parse(userInput)\n        flow = JSON.parse(flow)\n\n        const redirectMessage = {\n            service: \"cascataValidacao\",\n            input: userInput,\n            flow,\n            destinyBlock: \"default\"\n        }\n\n        return JSON.stringify(redirectMessage)\n    } catch (error) {\n        const redirectMessage = {\n            service: \"cascataValidacao\",\n            input: { \"input\": \"vazio\", \"type\": \"vazio\" },\n            flow: { \"origin\": \"vazio\", \"blockOrigin\": \"vazio\" },\n            destinyBlock: \"default\"\n        }\n\n        return JSON.stringify(redirectMessage)\n    }\n}","inputVariables":["userInput","flow"],"outputVariable":"redirectMessage"},"conditions":[]}],"$leavingCustomActions":[{"$id":"fed6de02-4c5c-42b7-8ccf-eb2f9b018acd","$typeOfContent":"","type":"Redirect","$title":"Redirect to \"cascataValidacao\"","$invalid":false,"settings":{"context":{"type":"text/plain","value":"{{redirectMessage}}"},"address":"{{redirectMessage@service}}"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false,"typeOfStateId":"state"},"$tags":[{"id":"blip-tag-dda8cf3c-5333-4ed8-aa47-b7b67fd22927","label":"ExecuteScriptV2","background":"#FFB74D","canChangeBackground":false},{"id":"blip-tag-4e3d568a-88f3-4fca-9111-babce05904d9","label":"Redirect","background":"#1EA1FF","canChangeBackground":false}],"id":"1ae5fcb1-d1de-41cd-a2d9-f7e2a54bf2ad","root":false,"$title":"[Redirect to] Cascata de Validacao","$position":{"top":"178px","left":"785px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"isAiGenerated":false},"f8807e7e-3d26-47d3-a7ac-295a9105b2f0":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"e04bed4d-5164-4c65-ab5e-beedcbc58a69","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[{"$id":"0551ffa8-107c-4550-8a11-3313e66ab5d5","$typeOfContent":"","$description":"","$inputSchema":{"type":"object","properties":{},"required":[]},"type":"ExecuteScriptV2","$title":"Run script \"redirectMessage\"","$invalid":false,"settings":{"function":"run","source":"function run() {\n    const redirectMessage = {\n        service: \"principal\",\n        destinyBlock: \"default\",\n    }\n    \n    return JSON.stringify(redirectMessage)\n}","inputVariables":[],"outputVariable":"redirectMessage"},"conditions":[]}],"$leavingCustomActions":[{"$id":"d590a51c-5cdb-4d64-b0fe-165e94ee8dba","$typeOfContent":"","type":"Redirect","$title":"Redirect to \"principal\"","$invalid":false,"settings":{"context":{"type":"text/plain","value":"{{redirectMessage}}"},"address":"{{redirectMessage@service}}"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false,"typeOfStateId":"state"},"isAiGenerated":false,"$tags":[{"id":"blip-tag-39b5d2c1-2aff-4efc-af89-09bcbab692fa","label":"ExecuteScriptV2","background":"#FFB74D","canChangeBackground":false},{"id":"blip-tag-e4dec5d4-1151-490d-991f-84fb0b1d8eae","label":"Redirect","background":"#1EA1FF","canChangeBackground":false}],"id":"f8807e7e-3d26-47d3-a7ac-295a9105b2f0","root":false,"$title":"[Redirect to] Principal","$position":{"top":"347px","left":"784px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"614ca8aa-1a53-435d-aa5c-95106caf4b35":{"$contentActions":[{"action":{"$id":"422453ce-dcd9-45c2-8f19-47d29a4718dd","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"f091ec53-8919-4990-9339-fdc17a129c0b","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"f091ec53-8919-4990-9339-fdc17a129c0b","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"0c0b5906-8887-4c44-90bc-30f756ac385d","$typeOfContent":"text","type":"SendMessage","settings":{"id":"730b76c7-4276-4444-abed-d7525ab6a861","type":"text/plain","content":"Ol√°! Que bom ter voc√™ aqui. üíú\n‚Ä®\nEu sou o {{bo}}Atlas{{bc}}, o assistente digital da {{bo}}AtlasX Log√≠stica Integrada.{{bc}}","metadata":{}},"$cardContent":{"document":{"id":"730b76c7-4276-4444-abed-d7525ab6a861","type":"text/plain","content":"Ol√°! Que bom ter voc√™ aqui. üíú\n‚Ä®\nEu sou o {{bo}}Atlas{{bc}}, o assistente digital da {{bo}}AtlasX Log√≠stica Integrada.{{bc}}"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"6e7092c3-42fe-4b76-8abb-e7d44da69326","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"1c86edd0-153a-4612-860d-a0249dc5db1b","typeOfStateId":"state","$connId":"con_28","$id":"b454d9b5-f829-40fc-a63f-5a7b931c65dc","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"0af75393-ba4b-49b6-ac0f-c8334c450348","$typeOfContent":"","type":"TrackEvent","$title":"boas vindas exibicao","$invalid":false,"settings":{"extras":{"Headline An√∫ncio":"{{metadata@headline}}","Id do An√∫ncio":"{{metadata@source_id}}","Url do An√∫ncio":"{{metadata@source_url}}"},"category":"boas vindas exibicao","action":"Exibicao"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"id":"blip-tag-e3026fcd-7e02-4ea2-a1a6-f7fa9692db99","label":"TrackEvent","background":"#61D36F","canChangeBackground":false},{"id":"blip-tag-5c7a5f71-5a1d-4266-8371-635524340cfe","label":"SendMessage","background":"#EE82EE","canChangeBackground":false}],"id":"614ca8aa-1a53-435d-aa5c-95106caf4b35","root":false,"$title":"[BV.0.0.1] [Msg]","$position":{"top":"359px","left":"1510px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"isAiGenerated":false},"1c86edd0-153a-4612-860d-a0249dc5db1b":{"$contentActions":[{"action":{"$id":"422453ce-dcd9-45c2-8f19-47d29a4718dd","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"f091ec53-8919-4990-9339-fdc17a129c0b","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"f091ec53-8919-4990-9339-fdc17a129c0b","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"0c0b5906-8887-4c44-90bc-30f756ac385d","$typeOfContent":"text","type":"SendMessage","settings":{"id":"730b76c7-4276-4444-abed-d7525ab6a861","type":"text/plain","content":"Antes de come√ßarmos, preciso te avisar que a AtlasX valoriza muito a sua seguran√ßa. üõ°Ô∏è\n\nSeus dados ser√£o tratados de acordo com a LGPD (Lei Geral de Prote√ß√£o de Dados) e utilizados exclusivamente para identificar ou realizar seu cadastro e facilitar suas consultas.\n\nAo continuar voc√™ est√° concordando com o tratamento do seus dados","metadata":{}},"$cardContent":{"document":{"id":"730b76c7-4276-4444-abed-d7525ab6a861","type":"text/plain","content":"Antes de come√ßarmos, preciso te avisar que a AtlasX valoriza muito a sua seguran√ßa. üõ°Ô∏è\n\nSeus dados ser√£o tratados de acordo com a LGPD (Lei Geral de Prote√ß√£o de Dados) e utilizados exclusivamente para identificar ou realizar seu cadastro e facilitar suas consultas.\n\nAo continuar voc√™ est√° concordando com o tratamento do seus dados"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"6e7092c3-42fe-4b76-8abb-e7d44da69326","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"ab020cc8-38be-4024-b6b5-a3cc58991cd6","typeOfStateId":"state","$connId":"con_33","$id":"65fddfa5-20ae-4306-b773-7ac3d6382231","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"0af75393-ba4b-49b6-ac0f-c8334c450348","$typeOfContent":"","type":"TrackEvent","$title":"lgpd exibicao","$invalid":false,"settings":{"extras":{"Headline An√∫ncio":"{{metadata@headline}}","Id do An√∫ncio":"{{metadata@source_id}}","Url do An√∫ncio":"{{metadata@source_url}}"},"category":"lgpd exibicao","action":"Exibicao"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"id":"blip-tag-c79a91e0-12cb-441a-8a52-860d304f2ca9","label":"TrackEvent","background":"#61D36F","canChangeBackground":false},{"id":"blip-tag-8c9c085f-a00c-4d23-8e88-903c3b0353d9","label":"SendMessage","background":"#EE82EE","canChangeBackground":false}],"id":"1c86edd0-153a-4612-860d-a0249dc5db1b","root":false,"$title":"[BV.0.0.2] [Msg]","$position":{"top":"488px","left":"1510px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"isAiGenerated":false},"ab020cc8-38be-4024-b6b5-a3cc58991cd6":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"90d6c37b-1a39-479a-8822-7bc99d6e0437","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"f8807e7e-3d26-47d3-a7ac-295a9105b2f0","$invalid":false,"typeOfStateId":"state"},"isAiGenerated":false,"$tags":[{"background":"#0A6045","label":"Go to","id":"blip-tag-2b06d5cc-ddd3-00f4-3d13-04799dbf4d06","canChangeBackground":false}],"id":"ab020cc8-38be-4024-b6b5-a3cc58991cd6","root":false,"$title":"[Go to] Principal","$position":{"top":"638px","left":"1510px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#fff9c4","textColor":"#000000","commentsIdList":[]}},"870c00cf-ab58-4567-9a81-366cc61b49c3":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"90d6c37b-1a39-479a-8822-7bc99d6e0437","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"f8807e7e-3d26-47d3-a7ac-295a9105b2f0","$invalid":false,"typeOfStateId":"state"},"isAiGenerated":false,"$tags":[{"background":"#0A6045","label":"Go to","id":"blip-tag-2b06d5cc-ddd3-00f4-3d13-04799dbf4d06","canChangeBackground":false}],"id":"870c00cf-ab58-4567-9a81-366cc61b49c3","root":false,"$title":"[Go to] Identifica√ß√£o e Valida√ß√£o","$position":{"top":"73px","left":"1119px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#fff9c4","textColor":"#000000","commentsIdList":[]}}},"globalActions":{"$contentActions":[],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"global-actions","$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false}}